let bx,NZ=NZR=0,hu,maxstamen,home,wr,sw,layers=[],petals=[],stamens=[],colornoise,feature,strad,drawstyle,stamencenter,g1,g2,tx,ty,glitch,direction=-9,perspective,particleslength,hash;function setup(){pixelDensity(1),colorMode(HSL);const myCanvas=createCanvas(min(1.1*windowHeight,1.1*windowWidth),min(.8*windowHeight,.8*windowWidth));myCanvas.parent("sketch"),bx=width/100,g1=createGraphics(width,height),g2=createGraphics(width+6*bx,height+2*bx),button=createButton(" << Generate new hash >> "),button.mousePressed(generate),button.parent("button"),generate(),frameRate(30),g1.strokeCap(SQUARE),strokeCap(SQUARE)}function generate(){frameCount=0,g2.translate(-tx,-ty),g1.translate(-tx,-ty),clear(),g1.clear(),g2.clear(),NZ=NZR=hu=maxstamen=home=wr=sw=LLR=feature=0,layers=[],petals=[],stamens=[],hash=randomHash(),hashDecode(hash),newpetal(),g2.translate(tx,ty),g1.translate(tx,ty),petals.forEach(p=>1==p.flID&&p.seclayer()),g2.filter(BLUR,bx),background(hu,100,4),particleslength=0}function draw(){background(hu,100,4,.05),image(g1,0,0),frameCount>100&&(push(),tint(0,100,100,min((frameCount-100)/1e3,.05)),image(g2,6*-nz()*bx,2*-nz()*bx),scale(2),image(g2,-bx,-bx),pop()),translate(tx,ty),frameCount<50?stem():(petals.forEach(p=>p.drawpetal()),frameCount>80&&maxstamen>0&&drawstamen())}